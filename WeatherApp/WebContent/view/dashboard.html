<div class="container">
	<div class="text-center row"> 
		<div class="col-xs-offset-4 col-xs-4 input-group" id="location">
		    <span class="input-group-addon"><i class="fa fa-map-marker" aria-hidden="true"></i></span>
			<input class="form-control" type="text" ng-model="model.zipCode" placeholder="Zipcode"/>
			<a class="btn btn-warning btn-sm" ng-click="model.loadWeatherForZipcode(model.zipCode)"> Update</a>
		</div>
	</div>
	<hr/>
	<div class=row>
		<div class="col-sm-8">
			<h3>Current Weather at {{model.locationName}} ({{model.coordinates.lat}}, {{model.coordinates.lon}})
	             <a ng-if="username" class="fav-icon {{model.hasPref ? 'fa fa-star' : 'fa fa-star-o'}}" 
	             	data-trigger="click"
	             	data-placement="bottom" popover></a>
	            <a ng-if="!username" class="fav-icon  fa fa-star-o" uib-tooltip="Please login to add this location as favorite!"></a>
	             <!-- <a ng-click="" ng-if="model.isFavorite" class="fav-icon fa fa-star"></a> -->
	             
	            <!-- Button trigger modal -->
				<small ng-if="username">
					<a href="" class="fav-icon" data-toggle="modal" data-target="#myModal">
					  Saved
					</a>
				</small>
			</h3>
			
			<div class="row">
				<div class="col-xs-1"><img ng-src="{{model.icon}}"></div>
				<div class="col-xs-8"><h4>Current: {{model.main.temp}}</h4> <br/> High: {{model.main.temp_max}} Low: {{model.main.temp_min}} </div>
			</div>
		</div>
		<div class="col-sm-4">
			<ng-map center="[{{model.coordinates.lat}}, {{model.coordinates.lon}}]">
				<!-- <marker position="[{{model.coordinates.lat}}, {{model.coordinates.lon}}]"></marker> -->
			</ng-map>
		</div>
	</div>
	
	<div id="popover-title" class="hide">
		<span>Add to preference</span>
		<a href="" data-toggle="popover">close</a>
	</div>
	
	<div id="popover-content" class="hide"> 
		<form>
			<input type='text' placeholder='Location name' ng-model='model.pref.name' /> <br/><br/>
			<label for='local'>Default location?</label> <input name='local' type='checkbox' ng-model='model.pref.local' />
			<br/>
			<div class="text-center">
				<a href='' ng-click='model.removeFav(model.pref)'  class='btn btn-danger btn-xs' ng-show='model.hasPref'>Remove</a>
				<a href='' ng-click='model.addToFav(model.pref.name, model.pref.local)' class='btn btn-success btn-xs'>{{model.hasPref ? 'Update' : 'Add'}}</a>
			</div>
		</form>
	</div>
	
	<!-- Modal -->
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	          <span aria-hidden="true">&times;</span>
	        </button>
	        <h4 class="modal-title" id="myModalLabel">Saved locations</h4>
	      </div>
	      <div class="modal-body">
        	<table class="table">
        		<tr>
        			<th class="text-center">Zipcode</th>
        			<th class="text-center">Name</th>
        			<th class="text-center">Is Local</th>
        		</tr>
        		<tr ng-repeat="pref in model.prefList">
        			<td class="text-center"><a href=""  data-dismiss="modal" ng-click="model.loadWeatherFromPref(pref)">{{pref.weatherPrefPK.zipcode}}</a></td>
        			<td class="text-center">{{pref.name}}</td>
        			<td class="text-center">{{pref.local}}</td>
        		</tr>
        	
        	</table>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
	      </div>
	    </div>
	  </div>
	</div>
</div>	